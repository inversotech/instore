<nb-card class="mb-1">

  <nb-card accent="primary" class="mb-0">
    <nb-card-header class="d-flex align-items-center">
      <button nbButton type="button" size="small" ghost nbTooltip="Regresar" (click)="onBack()" class="me-2">
        <nb-icon status="primary" style="font-size: 1.6rem;" icon="arrow-ios-back-outline" pack="eva"></nb-icon>
      </button>

      <nb-icon status="info" style="font-size: 1.6rem;" icon="shopping-cart-outline" pack="eva" class="me-3"></nb-icon>

      <div class="border-start ps-3 me-4 lh-base">
        <div class="fw-semibold">VENTAS DE BODEGA</div>
        <div class="fw-normal small text-primary">
          • Tienda de Ñaña
        </div>
      </div>
      <!-- {{ misCajasHabilitadas | json }} -->
    </nb-card-header>
    <!-- <nb-card-header>

      <div style="line-height: 1rem;">
        <table>
          <tr>
            <td>
              <button nbButton type="button" size="small" class="me-1" ghost nbTooltip="Regresar" (click)="onBack()">
                <nb-icon status="primary" style="font-size: 1.6rem;" icon="arrow-ios-back-outline" pack="eva"></nb-icon>
                &nbsp;
              </button>
            </td>
            <td>
              <nb-icon status="info" style="font-size: 1.6rem;" icon="shopping-cart-outline" pack="eva"></nb-icon> &nbsp;
            </td>
            <td class="border-start ps-2">
              <div>
                <span i18n>
                  ALMACEN PRINCIPAL
                </span>
              </div>
              <div class="fw-light">Generar ventas diarias</div>
            </td>
            <td class="border-start ps-2">
              <div>
                <span i18n>
                  VENTAS DE BODEGA
                </span>
              </div>
              <div class="fw-light">Generar ventas diarias</div>
            </td>
          </tr>
        </table>
      </div>
    </nb-card-header> -->
    <nb-card-body>
      <!-- {{ documentoForm.value | json }} -->
      <form [formGroup]="documentoForm">
        <div class="row g-1">

          <div class="col-md-3">
            <label for="id_conta_documento" class="label">Tipo de comprobante</label>
            <nb-select placeholder="Seleccionar tipo de comprobante" fullWidth [size]="'small'"
              formControlName="id_conta_documento" id="id_conta_documento">
              <nb-option value="-1">-Seleccione-</nb-option>
              <nb-option *ngFor="let item of contaDocumentos" [value]="item.id_conta_documento"> {{
                item.id_tipo_comprobante }}-{{ item.nombre }} ({{ item.serie }})</nb-option>
            </nb-select>
          </div>

          <div class="col-md-3">
            <label for="ruc" i18n class="label">
              Documento del cliente (Ruc/Dni) </label>
            <div>
              <nb-form-field>
                <!-- <nb-icon nbPrefix icon="search-outline" pack="eva"></nb-icon> -->

                <input #inputCliente [status]="clienteStatus" autocomplete="off" type="search" name="ruc" id="ruc"
                  [formControl]="rucCliente" fullWidth fieldSize="small" nbInput [nbAutocomplete]="autoClienteRuc">
                <!-- [formControl]="rucCliente" fullWidth fieldSize="small" nbInput> -->
                <button type="button" (click)="onSearchCliente()" outline [nbSpinner]="clienteLoading"
                  nbSpinnerStatus="primary" nbSuffix [status]="clienteStatus" type="submit" nbButton size="small"
                  nbTooltip="Buscar">
                  <nb-icon icon="search-outline"></nb-icon>
                </button>

              </nb-form-field>
              <nb-autocomplete #autoClienteRuc [activeFirst]="true" [handleDisplayFn]="clienteHandle"
                (selectedChange)="clienteSelect($event)">
                <nb-option *ngFor="let item of filteredOptionsClientes$ | async" [value]="item">
                  <nb-user shape="rectangle" [name]="item.numero_documento" [title]="item.razon_social"></nb-user>
                </nb-option>
              </nb-autocomplete>
            </div>
          </div>

          <!-- <div class="col-md-1 mt-xxl-auto">
            <button nbButton type="button" (click)="onSearchCliente()" class="me-1" fullWidth type="submit"
              status="primary" size="small">
              <nb-icon nbPrefix icon="search-outline" pack="eva"></nb-icon>
            </button>
          </div> -->

          <div class="col-md-3">
            <label for="cliente_razon_social" i18n class="label">
              Ap. y nombres/Razón social del cliente
            </label>
            <div [nbSpinner]="clienteLoading">
              <nb-form-field>
                <input readonly type="text" formControlName="cliente_razon_social" name="cliente_razon_social"
                  id="cliente_razon_social" nbInput fullWidth fieldSize="small">
              </nb-form-field>
            </div>
          </div>

          <div class="col-md-3">
            <label for="cliente_direccion" i18n class="label">
              Dirección del cliente
            </label>
            <div [nbSpinner]="clienteLoading">
              <nb-form-field>
                <input type="text" formControlName="cliente_direccion" name="cliente_direccion" id="cliente_direccion"
                  nbInput fullWidth fieldSize="small">
              </nb-form-field>
            </div>
          </div>

          <div class="col-md-3">
            <label for="cliente_email" i18n class="label">
              E-mail del cliente
            </label>
            <div [nbSpinner]="clienteLoading">
              <nb-form-field>
                <input type="text" formControlName="cliente_email" name="cliente_email" id="cliente_email" nbInput
                  fullWidth fieldSize="small">
              </nb-form-field>
            </div>
          </div>

          <div class="col-md-3">
            <label for="fecha_emision" i18n class="label"> Fecha emisión</label>
            <nb-form-field>
              <input type="text" autocomplete="off" name="fecha_emision" placeholder="00/00/0000" id="fecha_emision"
                formControlName="fecha_emision" [nbDatepicker]="nfecha22" fullWidth fieldSize="small" nbInput>
              <nb-icon nbSuffix icon="calendar-outline" pack="eva"></nb-icon>
            </nb-form-field>
            <nb-datepicker #nfecha22></nb-datepicker>
          </div>

          <div class="col-md-3">
            <label class="label"> Tipo de transacción</label>
            <div>
              <nb-radio-group class="d-flex" name="es_credito" formControlName="es_credito" status="warning">
                <!-- <nb-radio value="0"> Al contado</nb-radio>
                <nb-radio value="1"> Al crédito (1 cuota)</nb-radio> -->
                <nb-radio value="0"> Contado</nb-radio>
                <nb-radio value="1"> Crédito</nb-radio>
              </nb-radio-group>
            </div>
          </div>

          <div class="col-md-3">
            <label for="fecha_vencimiento" i18n class="label"> Fecha vencimiento cuota</label>
            <nb-form-field>
              <input type="text" autocomplete="off" name="fecha_vencimiento" placeholder="00/00/0000"
                id="fecha_vencimiento" formControlName="fecha_vencimiento" [nbDatepicker]="nfecha33" fullWidth
                fieldSize="small" nbInput>
              <nb-icon nbSuffix icon="calendar-outline" pack="eva"></nb-icon>
            </nb-form-field>
            <nb-datepicker #nfecha33></nb-datepicker>
          </div>
        </div>
      </form>

    </nb-card-body>
  </nb-card>

  <nb-card accent="basic" class="mb-0">
    <nb-card-body>
      <!-- {{ documentoDetalleForm.value | json }} -->
      <form [formGroup]="documentoDetalleForm">
        <div class="row g-1" [nbSpinner]="articuloAddLoading" nbSpinnerStatus="primary">
          <div class="col-md-4 mt-2">
            <label for="text_search" class="label">Buscar producto o servicio</label>
            <nb-form-field>
              <!-- <nb-icon nbPrefix icon="search-outline" pack="eva"></nb-icon> -->
              <input #inputArticulo type="search" [formControl]="articuloSearch" placeholder="Buscar..." nbInput
                fullWidth fieldSize="small" [nbAutocomplete]="autoSearchArticulo">

              <button type="button" (click)="onSearchArticulo()" outline [nbSpinner]="articuloSearchLoading"
                nbSpinnerStatus="primary" nbSuffix [status]="articuloStatus" type="submit" nbButton size="small"
                nbTooltip="Buscar">
                <nb-icon icon="search-outline"></nb-icon>
              </button>

            </nb-form-field>

            <nb-autocomplete #autoSearchArticulo [activeFirst]="true" [handleDisplayFn]="articuloHandle"
              (selectedChange)="articuloSelect($event)">
              <nb-option *ngFor="let item of filteredOptionsArticulo$ | async" [value]="item">
                <nb-user shape="rectangle" [name]="item.articulo_nombre" [title]="item.codigo_almacen"></nb-user>
              </nb-option>
            </nb-autocomplete>

          </div>
          <div class="col-md-1 mt-2">
            <label class="label">Stock</label>
            <input type="number" formControlName="stock_actual" readonly placeholder="00.00" nbInput fullWidth
              fieldSize="small">
          </div>
          <div class="col-md-2 mt-2">
            <label class="label">Precio</label>
            <input type="number" formControlName="precio_inicial" placeholder="00.00" nbInput fullWidth
              fieldSize="small">
          </div>
          <div class="col-md-1 mt-2">
            <label class="label">Cantidad</label>
            <input type="number" formControlName="cantidad" placeholder="00.00" nbInput fullWidth fieldSize="small">
          </div>
          <div class="col-md-1 mt-2">
            <label class="label">Descuento</label>
            <input type="number" formControlName="descuento_total_item" placeholder="00.00" nbInput fullWidth
              fieldSize="small">
          </div>
          <div class="col-md-3 mt-md-auto gap-1">
            <button nbButton class="me-1" type="button" (click)="submitDocumentoDetalle()" status="primary"
              size="small">
              <nb-icon nbPrefix icon="shopping-cart-outline" pack="eva"></nb-icon>
              Agregar
            </button>
            <button nbButton class="me-1" type="button" (click)="onActualizarDetalle()" outline status="basic"
              size="small" nbTooltip="Actualizar">
              <nb-icon nbPrefix icon="refresh-outline" pack="eva"></nb-icon>
            </button>
          </div>
        </div>
      </form>

      <div class="row g-1" [nbSpinner]="loadingSpinner" nbSpinnerStatus="primary">
        <div class="col-md-12 mt-2">
          <table class="table table-bordered table-sm mb-0">
            <thead>
              <tr class="text-center">
                <th>N</th>
                <th>PRODUCTO/SERVICIO</th>
                <th>CANTIDAD</th>
                <th>PRECIO UNITARIO</th>
                <th>B.I.</th>
                <th>I.G.V</th>
                <th>DESCUENTO</th>
                <th>SUBTOTAL</th>
                <th>ACCIONES</th>
              </tr>
            </thead>

            <tbody *ngIf="ventaDetalles.length > 0; else emptyList">
              <!-- <tbody> -->
              <tr *ngFor="let item of ventaDetalles; let i=index">
                <td class="text-center"> {{ (i+1) }}</td>
                <td>{{ item.detalle }}
                  <nb-icon style="font-size: medium;" *ngIf="item.id_articulo" nbPrefix icon="checkmark-circle-outline"
                    status="success" pack="eva" nbTooltip="ID Articulo: {{ item.id_articulo }}"></nb-icon>
                  <span class="fst-italic">({{ item.tipo_igv_descripcion }})</span>
                </td>
                <td class="text-center">{{ item.cantidad }}</td>
                <td class="text-end">{{ item.precio_inicial }}</td>
                <td class="text-end">{{ item.valor_uni_item }}</td>
                <td class="text-end">{{ item.igv }}</td>
                <td class="text-end">{{ item.descuento_total_item }}</td>
                <td class="text-end">{{ item.importe_total }}</td>
                <td class="text-center">
                  <button nbButton *ngIf="item.finalizado == '0'" class="me-1" size="tiny" class="me-1"
                    nbTooltip="Eliminar" (click)="onDeleteVentaDetalle(item)">
                    <nb-icon nbPrefix icon="trash-2-outline" status="danger" pack="eva"></nb-icon>
                  </button>
                  <button nbButton class="me-1" size="tiny" nbTooltip="Editar operación"
                    (click)="onEditarOperacion(item)">
                    <nb-icon status="info" icon="edit-outline"></nb-icon>
                  </button>
                </td>
              </tr>

            </tbody>
            <tfoot>
              <tr>
                <th colspan="6" style="border-style: none;"></th>
                <th class="text-end">OP. GRAVADA</th>
                <th class="text-end">{{ ventaTotales?.bi_gravada }}</th>
              </tr>
              <tr *ngIf="ventaTotales?.mto_inafecto > 0">
                <th colspan="6" style="border-style: none;"></th>
                <th class="text-end">OP. INAFECTA</th>
                <th class="text-end">{{ ventaTotales?.mto_inafecto }}</th>
              </tr>
              <tr *ngIf="ventaTotales?.mto_exonerado > 0">
                <th colspan="6" style="border-style: none;"></th>
                <th class="text-end">OP. EXONERADA</th>
                <th class="text-end">{{ ventaTotales?.mto_exonerado }}</th>
              </tr>
              <tr *ngIf="ventaTotales?.valor_op_gratuitas > 0">
                <th colspan="6" style="border-style: none;"></th>
                <th class="text-end">OP. GRATUITA</th>
                <th class="text-end">{{ ventaTotales?.valor_op_gratuitas }}</th>
              </tr>
              <tr *ngIf="ventaTotales?.descuento_bi > 0">
                <th colspan="6" style="border-style: none;"></th>
                <th class="text-end">BI DESCUENTO</th>
                <th class="text-end">{{ ventaTotales?.descuento_bi }}</th>
              </tr>
              <tr>
                <th colspan="6" style="border-style: none;"></th>
                <th class="text-end">I.G.V.</th>
                <th class="text-end">{{ ventaTotales?.igv }}</th>
              </tr>
              <tr>
                <th colspan="6" style="border-style: none;"></th>
                <th class="text-end">TOTAL</th>
                <th class="text-end">{{ ventaTotales?.importe }}</th>
              </tr>
            </tfoot>
          </table>

        </div>
      </div>

      <ng-template #emptyList>
        <tbody>
          <tr>
            <td colspan="9" class="text-center label">
              No hay registros para mostrar
            </td>
          </tr>
        </tbody>
      </ng-template>
    </nb-card-body>
  </nb-card>


  <nb-tabset>
    <nb-tab tabTitle="Modalidad de pago" tabIcon="credit-card-outline" class="p-0">
      <nb-card class="m-0">
        <nb-card-body>


          <form [formGroup]="saleDepositoForm">

            <div class="row g-3">



              <!-- PAGO EFECTIVO -->
              <div class="offset-md-2 col-md-4" *ngIf="hasCajaHabilitadaEfectivo">

                <div class="d-flex">
                  <div class="me-2 pt-2" (click)="pushPayOnMethod('efectivo')">
                    <img src="assets/icons/logo-efectivo.png" alt="Efectivo" style="height: 50px;">
                  </div>
                  <div class="flex-grow-1">
                    <input nbInput fullWidth fieldSize="small" status="primary" formControlName="efectivo" class="mb-2"
                      placeholder="Monto en efectivo (S/.)">
                    <input nbInput fullWidth fieldSize="small" formControlName="glosa" placeholder="Glosa adicional">
                  </div>
                </div>

                <!-- <div class="mb-1 row">
                  <label class="col-md-5 text-md-end label form-label" i18n>Pago con efectivo</label>
                  <div class="col-md-7">
                    <input fieldSize="small" status="primary" nbInput fullWidth class="text-end" placeholder="00.00"
                      formControlName="efectivo">
                  </div>
                </div>
                <div class="mb-1 row">
                  <label class="col-md-5 text-md-end label form-label" i18n>Glosa adicional</label>
                  <div class="col-md-7">
                    <input fieldSize="small" formControlName="glosa" nbInput fullWidth class="text-start"
                      placeholder="Glosa">
                  </div>
                </div> -->
              </div>

              <!-- PAGO YAPE -->
              <div class="col-md-4" *ngIf="hasCajaHabilitadaYape">

                <div class="d-flex">
                  <div class="me-2 pt-2" (click)="pushPayOnMethod('yape')">
                    <img src="assets/icons/logo-yape.png" alt="Yape" style="height: 50px;">
                  </div>
                  <div class="flex-grow-1">
                    <input nbInput fullWidth fieldSize="small" status="primary" formControlName="yape" class="mb-2"
                      placeholder="Monto con yape (S/.)">
                    <input nbInput fullWidth fieldSize="small" formControlName="glosa_yape"
                      placeholder="Glosa adicional">
                  </div>
                </div>
                <!-- <div class="d-flex align-items-center mb-3">
                  <img src="assets/icons/logo-yape.png" alt="Yape" style="height: 35px;" class="me-2">
                  <span class="fw-semibold">Pago con YAPE</span>
                </div>

                <div class="mb-2">
                  <input nbInput fullWidth fieldSize="small" status="primary" formControlName="yape" class="text-end"
                    placeholder="Monto (S/.)">
                </div>

                <div>
                  <input nbInput fullWidth fieldSize="small" formControlName="glosa_yape" class="text-start"
                    placeholder="Glosa adicional">
                </div> -->

                <!-- <div class="mb-1 row">
                  <label class="col-md-5 text-md-end label form-label" i18n>Pago con YAPE</label>
                  <div class="col-md-7">
                    <input fieldSize="small" status="primary" nbInput fullWidth class="text-end" placeholder="00.00"
                      formControlName="yape">
                  </div>
                </div>
                <div class="mb-1 row">
                  <label class="col-md-5 text-md-end label form-label" i18n>Glosa adicional</label>
                  <div class="col-md-7">
                    <input fieldSize="small" formControlName="glosa_yape" nbInput fullWidth class="text-start"
                      placeholder="Glosa">
                  </div>
                </div> -->
              </div>

              <div class="col-md-2 text-center">
                <nb-toggle status="info" [formControl]="esCreditoInterno"
                  nbTooltip="Venta al crédito. Esta opción permite generar créditos a clientes, sin embargo el comprobante electrónico sigue siendo al contado"
                  nbTooltipStatus="info">
                </nb-toggle>
                <div>
                  <small>
                    Venta al crédito (El cliente pagará después)
                  </small>
                </div>
              </div>

            </div>
            <div class="row g-3">
              <div class="col text-center">
                <button nbButton (click)="showMoreOptionPay = !showMoreOptionPay"
                  nbTooltip="Click para ver más opciones" size="tiny" status="basic" class="text-lowercase mt-4">
                  {{ showMoreOptionPay ? 'Ver menos opciones de pago' : 'Ver más opciones de pago' }}
                </button>
              </div>
            </div>
            <div class="row g-3" *ngIf="showMoreOptionPay">
              <div class="offset-md-2"></div>

              <!-- PAGO DEPOSITO EN CUENTA -->
              <div class="col-md-4" *ngIf="hasCajaHabilitadaDeposito">

                <!-- <div class="d-flex align-items-center"> -->
                <div class="d-flex">
                  <div class="me-2 pt-2" (click)="pushPayOnMethod('transferencia')">
                    <img src="assets/icons/transferencia-movil.png" alt="Transferencia movil" style="height: 50px;">
                  </div>
                  <div class="flex-grow-1">
                    <input nbInput fullWidth fieldSize="small" status="primary" formControlName="deposito_cuenta"
                      class="mb-2" placeholder="Monto con transferencia (S/.)">
                    <nb-select formControlName="id_cuenta_bancaria" placeholder="Cuenta bancaria" fullWidth
                      [size]="'small'" class="mb-2">
                      <nb-option *ngFor="let item of cuentaBancarias" [value]="item.id_cuenta_bancaria">
                        {{ item.nro_cuenta }} - {{ item.banco_nombre }}
                      </nb-option>
                    </nb-select>
                    <input fieldSize="small" formControlName="nro_operacion_dep" nbInput fullWidth class="text-start"
                      placeholder="Nro. de operación" class="mb-2">
                    <nb-form-field class="mb-2">
                      <input type="text" autocomplete="off" name="fecha_operacion_dep" placeholder="Fecha de operación"
                        id="fecha_operacion_dep" formControlName="fecha_operacion_dep" [nbDatepicker]="nfecha2"
                        fullWidth fieldSize="small" nbInput>
                      <nb-icon nbSuffix icon="calendar-outline" pack="eva"></nb-icon>
                    </nb-form-field>
                    <nb-datepicker #nfecha2></nb-datepicker>

                  </div>
                </div>


                <!-- <div class="mb-1 row">
                  <label class="col-md-5 text-md-end label form-label" i18n>Pago a cuenta-cte</label>
                  <div class="col-md-7">
                    <input fieldSize="small" status="primary" nbInput fullWidth class="text-end" placeholder="00.00"
                      formControlName="deposito_cuenta">
                  </div>
                </div>
                <div class="mb-1 row">
                  <label class="col-md-5 text-md-end label form-label" i18n>Cuenta bancaria</label>
                  <div class="col-md-7">
                    <nb-select formControlName="id_cuenta_bancaria" placeholder="Cuenta bancaria" fullWidth
                      [size]="'small'">
                      <nb-option *ngFor="let item of cuentaBancarias" [value]="item.id_cuenta_bancaria">
                        {{ item.nro_cuenta }} - {{ item.banco_nombre }}
                      </nb-option>
                    </nb-select>
                  </div>
                </div>
                <div class="mb-1 row">
                  <label class="col-md-5 text-end label form-label" i18n>Nro de operación</label>
                  <div class="col-md-7">
                    <input fieldSize="small" formControlName="nro_operacion_dep" nbInput fullWidth class="text-start"
                      placeholder="####">
                  </div>
                </div>
                <div class="mb-1 row">
                  <label class="col-md-5 text-end label form-label" i18n>Fecha de
                    operación</label>
                  <div class="col-md-7">
                    <nb-form-field>
                      <input type="text" autocomplete="off" name="fecha_operacion_dep" placeholder="00/00/0000"
                        id="fecha_operacion_dep" formControlName="fecha_operacion_dep" [nbDatepicker]="nfecha2"
                        fullWidth fieldSize="small" nbInput>
                      <nb-icon nbSuffix icon="calendar-outline" pack="eva"></nb-icon>
                    </nb-form-field>
                    <nb-datepicker #nfecha2></nb-datepicker>
                  </div>
                </div> -->
              </div>

              <!-- PAGO TARJETA DE CREDITO -->
              <div class="col-md-4" *ngIf="hasCajaHabilitadaCreditCard">

                <div class="d-flex">
                  <div class="me-2 pt-2" (click)="pushPayOnMethod('tarjeta')">
                    <img src="assets/icons/pago-con-tarjeta.png" alt="Pago con tarjeta" style="height: 50px;">
                  </div>
                  <div class="flex-grow-1">
                    <input fieldSize="small" status="primary" formControlName="tarjeta" nbInput fullWidth
                      class="text-end" placeholder="Monto con tarjeta (S/.)" class="mb-2">

                    <nb-select formControlName="id_tipo_tarjeta" placeholder="Tipo de tarjeta" fullWidth
                      [size]="'small'" class="mb-2" placeholder="Tipo de tarjeta">
                      <nb-option *ngFor="let item of tipoTarjetas" [value]="item.id_tipo_tarjeta">{{ item.nombre }}
                      </nb-option>
                    </nb-select>

                    <input formControlName="operacion" fieldSize="small" nbInput fullWidth
                      placeholder="Nro. de operación" class="mb-2">

                  </div>
                </div>


                <!-- <div class="mb-1 row">
                  <label class="col-md-5 text-md-end label form-label" i18n>Pago con tarjeta</label>
                  <div class="col-md-7">
                    <input fieldSize="small" status="primary" formControlName="tarjeta" nbInput fullWidth
                      class="text-end" placeholder="00.00">
                  </div>
                </div>
                <div class="mb-1 row">
                  <label class="col-md-5 text-md-end label form-label" i18n>Tipo de tarjeta</label>
                  <div class="col-md-7">
                    <nb-select formControlName="id_tipo_tarjeta" placeholder="Tipo de tarjeta" fullWidth
                      [size]="'small'">
                      <nb-option *ngFor="let item of tipoTarjetas" [value]="item.id_tipo_tarjeta">{{ item.nombre }}
                      </nb-option>
                    </nb-select>
                  </div>
                </div>
                <div class="mb-1 row">
                  <label class="col-md-5 text-md-end label form-label" i18n>Nro de operación</label>
                  <div class="col-md-7">
                    <input formControlName="operacion" fieldSize="small" nbInput fullWidth placeholder="####">
                  </div>
                </div> -->
              </div>

              <!-- PAGOS ANTICIPADOS -->
              <div class="col-md-4">
                <div class="mb-1 row">
                  <label class="col-md-5 text-md-end label form-label" i18n>Pagos anticipados</label>
                  <div class="col-md-7">
                    <button nbButton status="primary" ghost size="tiny">
                      <nb-icon nbPrefix icon="plus-outline" pack="eva"></nb-icon>
                      Agregar pago anticipado
                    </button>
                  </div>
                </div>
                <div class="mb-1 row">
                  <div class="offset-md-1 col-md-11">
                    <nb-list>
                      <nb-list-item class="d-flex justify-content-between py-1">
                        <small>BCP 1234 - 12/12/2020</small>
                        <small class="fw-bold">100.00</small>
                      </nb-list-item>
                      <nb-list-item class="d-flex justify-content-between py-1">
                        <small>BCP 1234 - 12/12/2020</small>
                        <small class="fw-bold">100.00</small>
                      </nb-list-item>
                      <nb-list-item class="d-flex justify-content-end py-1">
                        <small>Total anticipos: </small>
                        <small class="fw-bold ms-2">100.00</small>
                      </nb-list-item>
                    </nb-list>
                  </div>
                </div>

                <!-- <div class="mb-1 row">
                  <label class="col-md-5 text-end label form-label" i18n>Tipo de tarjeta</label>
                  <div class="col-md-7">
                    <nb-select formControlName="id_tipotarjeta" placeholder="Tipo de tarjeta" fullWidth
                      [size]="'small'">
                      <nb-option *ngFor="let item of cardTypes" [value]="item.id_tipotarjeta">{{ item.nombre }}
                      </nb-option>
                    </nb-select>
                  </div>
                </div>
                <div class="mb-1 row">
                  <label class="col-md-5 text-end label form-label" i18n>Nro de operación</label>
                  <div class="col-md-7">
                    <input formControlName="operacion" fieldSize="small" nbInput fullWidth placeholder="####">
                  </div>
                </div> -->
              </div>

            </div>
          </form>
        </nb-card-body>
      </nb-card>
    </nb-tab>
  </nb-tabset>

  <div class="text-center mt-3 mb-4">
    <button nbButton type="button" size="small" class="me-1" status="primary" nbTooltip="Fin" (click)="onFinalizar()">
      <nb-icon nbPrefix icon="checkmark-circle-outline" pack="eva"></nb-icon>
      FINALIZAR VENTA
    </button>

  </div>
</nb-card>