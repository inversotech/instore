<nb-card [nbSpinner]="loadingSpinnerSave" status="primary" nbSpinnerStatus="primary">
  <nb-card-header class="d-flex justify-content-between">
    <div class="lh-base">
      <div class="fw-bold">CIERRE DE CAJA</div>
      <small>Registre el cierre del día</small>
    </div>
    <nb-icon icon="close-outline" (click)="onClose()" style="cursor: pointer"></nb-icon>
  </nb-card-header>

  <nb-card-body>
    <!-- Información de la caja -->
    <nb-alert class="mb-2 py-1 lh-base" style="border-left: 0.2rem rgb(2, 156, 216) solid;">
      <div class="d-flex justify-content-between ">
        <span class="text-muted">Caja:</span>
        <strong>{{ acaja.caja_nombre }}</strong>
      </div>
      <div class="d-flex justify-content-between ">
        <span class="text-muted">Medio de pago:</span>
        <strong>{{ acaja.medio_pago_nombre }}</strong>
      </div>
      <div class="d-flex justify-content-between ">
        <span class="text-muted">Fecha apertura:</span>
        <strong>{{ acaja.fecha_apertura | date:'dd/MM/yyyy HH:mm' }}</strong>
      </div>
      <div class="d-flex justify-content-between">
        <span class="text-muted">Estado:</span>
        <strong class="text-success">ABIERTO</strong>
      </div>
    </nb-alert>

    <!-- Advertencia -->
    <nb-alert status="warning" class="mb-1 lh-base fw-normal">
      <strong class="fw-bold">Atención:</strong> Al cerrar esta caja, no podrá registrar más depósitos en ella.
    </nb-alert>

    <!-- Totales -->
    <div class="row mb-2">
      <div class="col-6">
        <nb-card status="primary" class="mb-0">
          <nb-card-body class="text-center">
            <small class="text-muted">TOTAL DEPÓSITOS</small>
            <h4 class="mb-0 mt-2">S/ 10.00</h4>
            <!-- <h4 class="mb-0 mt-2">S/ {{ totales.total_importe | number:'1.2-2' }}</h4> -->
          </nb-card-body>
        </nb-card>
      </div>
      <div class="col-6">
        <nb-card status="info" class="mb-0">
          <nb-card-body class="text-center">
            <small class="text-muted">CANTIDAD DEPOSITOS</small>
            <!-- <h4 class="mb-0 mt-2">{{ totales.cantidad }}</h4> -->
            <h4 class="mb-0 mt-2">10</h4>
            <!-- <small class="text-muted">depósitos</small> -->
          </nb-card-body>
        </nb-card>
      </div>
    </div>

    <!-- Formulario -->
    <form [formGroup]="cierreForm">
      <div class="mb-3">
        <label class="form-label label required">Comisión</label>
        <nb-form-field>
          <input nbInput fullWidth type="number" formControlName="importe_comision" placeholder="0.00" step="0.01">
          <nb-icon nbPrefix icon="pricetags-outline"></nb-icon>
        </nb-form-field>
      </div>

      <div class="mb-3">
        <label class="form-label label">Glosa / Observaciones</label>
        <input nbInput fullWidth formControlName="descripcion_cierre" placeholder="Escriba alguna observación sobre el cierre...">
      </div>
    </form>

  </nb-card-body>

  <nb-card-footer class="text-end">
    <button nbButton status="basic" size="small" (click)="onClose()" class="me-2">
      <nb-icon icon="close-outline"></nb-icon>
      Cancelar
    </button>
    <button nbButton status="primary" size="small" (click)="onSave()" [disabled]="cierreForm.invalid">
      <nb-icon icon="checkmark-outline"></nb-icon>
      Cerrar Caja
    </button>
  </nb-card-footer>
</nb-card>